{% extends 'base.html' %}

{% load static %}

{% block title %} {{ user }} - Profile {% endblock %}

{% block body %}
<style>
    .main-container {
        font-family: 'Ubuntu', sans-serif;
        width: 950px;
        height: 1325px;
        margin: 6em auto;
    }

    @import url(https://fonts.googleapis.com/css?family=Ubuntu:400,700);
    @import url(https://weloveiconfonts.com/api/?family=entypo|fontawesome|zocial);

    /* entypo */
    [class*="entypo-"]:before {
        font-family: 'entypo', sans-serif;
    }

    /* fontawesome */
    [class*="fontawesome-"]:before {
        font-family: 'FontAwesome', sans-serif;
    }

    /* zocial */
    [class*="zocial-"]:before {
        font-family: 'zocial', sans-serif;
    }

    @font-face {
        font-family: 'icomoon';
        src: url('https://jlalovi-cv.herokuapp.com/font/icomoon.eot');
        src: url('https://jlalovi-cv.herokuapp.com/font/icomoon.eot?#iefix') format('embedded-opentype'),
            url('https://jlalovi-cv.herokuapp.com/font/icomoon.ttf') format('truetype'),
            url('https://jlalovi-cv.herokuapp.com/font/icomoon.woff') format('woff'),
            url('https://jlalovi-cv.herokuapp.com/font/icomoon.svg#icomoon') format('svg');
        font-weight: normal;
        font-style: normal;
    }

    [class^="icon-"],
    [class*=" icon-"] {
        font-family: 'icomoon';
        speak: none;
        font-style: normal;
        font-weight: normal;
        font-variant: normal;
        text-transform: none;
        line-height: 1;

        /* Better Font Rendering =========== */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .icon-cloudy:before {
        content: "\e60f";
    }

    .icon-sun:before {
        content: "\e610";
    }

    .icon-cloudy2:before {
        content: "\e611";
    }

    .block {
        height: 80px;
    }

    .header-menu {
        font-size: 17px;
        line-height: 80px;
    }

    .header-menu li {
        position: relative;
        -webkit-transform: translateZ(0);
        /** To avoid a flash when hover messages **/
    }

    .header-menu li a,
    .main-container a,
    .main-container h1,
    .main-container p {
        color: #fff;
    }

    .header-menu-tab {
        padding: 0 27px;
        display: block;
        line-height: 74px;
        font-size: 17px;
        -webkit-transition: background .3s;
        transition: background .3s;
    }

    .header-menu-tab:hover {
        background: #50597b;
        border-bottom: 4px solid #11a8ab;
        text-decoration: none;
    }

    .header-menu-tab .icon {
        padding-right: 15px;
    }

    .header-menu-number {
        position: absolute;
        line-height: 22px;
        padding: 0 6px;
        font-weight: 700;
        background: #e64c65;
        border-radius: 100%;
        top: 15px;
        right: 2px;
        -webkit-transition: all .3s linear;
        transition: all .3s linear;
    }

    .block {
        margin-bottom: 25px;
        background: #394264;
        border-radius: 5px;
    }

    .horizontal-list {
        margin: 0;
        padding: 0;
        list-style-type: none;
    }

    .horizontal-list li {
        float: left;
    }

    .profile-picture {
        border-radius: 100%;
        overflow: hidden;
        -webkit-box-sizing: content-box;
        -moz-box-sizing: content-box;
        box-sizing: content-box;
    }

    .profile-menu {
        float: right;
        height: 80px;
        padding-right: 20px;
    }

    .profile-menu p {
        font-size: 17px;
        display: inline-block;
        line-height: 76px;
        margin: 0;
        padding-right: 10px;
    }

    .profile-menu a {
        padding-left: 5px;
    }

    .profile-menu a:hover {
        text-decoration: none;
    }

    .small-profile-picture {
        display: inline-block;
        vertical-align: middle;
    }

    .scnd-font-color {
        color: #9099b7;
    }

    .profile {
        height: 535px;
        overflow: auto;
    }

    .add-button .icon {
        float: right;
        line-height: 18px;
        width: 23px;
        border: 2px solid;
        border-radius: 100%;
        font-size: 18px;
        text-align: center;
        margin: 10px;
    }

    .add-button .icon:hover {
        color: #e64c65;
        border-color: #e64c65;
    }

    .user-name {
        margin: 25px 0 16px;
        text-align: center;
    }

    .profile-description {
        width: 210px;
        margin: 0 auto;
        text-align: center;
    }

    .profile-options li {
        border-left: 1px solid #1f253d;
    }

    .profile-options p {
        margin: 0;
    }

    .profile-options a {
        display: block;
        width: 99px;
        line-height: 60px;
        text-align: center;
        -webkit-transition: background .3s;
        transition: background .3s;
    }

    .profile-options a:hover {
        text-decoration: none;
        background: #50597b;
    }

    .profile-options a:hover.comments .icon {
        color: #fcb150;
    }

    .profile-options a:hover.views .icon {
        color: #11a8ab;
    }

    .profile-options a:hover.likes .icon {
        color: #e64c65;
    }

    .profile-options .icon {
        padding-right: 10px;
    }

    .profile-options .comments {
        border-top: 4px solid #fcb150;
    }

    .profile-options .views {
        border-top: 4px solid #11a8ab;
    }

    .profile-options .likes {
        border-top: 4px solid #e64c65;
    }

    .cntnr {
        padding: 12rem 2rem 2rem;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        min-height: 90vh;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        justify-content: center;
        gap: 1rem;
        font-family: Poppins, sans-serif;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        background: #13212e;
        color: #fff;
    }

    .input-icon {
        font-size: 22px;
        position: absolute;
        left: 48px;
        top: 10px;
    }

    .button-update {
        border: none;
        background: #cc324b;
        display: block;
        width: 175px;
        line-height: 50px;
        font-size: 16px;
        font-weight: 700;
        text-align: center;
        margin: 0 auto;
        border-radius: 5px;
        -webkit-transition: background .3s;
        transition: background .3s;
    }

    .titular {
        color: #fff;
        display: block;
        line-height: 60px;
        margin: 0;
        text-align: center;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

    .input-container {
        text-align: center;
        position: relative;
    }

    input[type=text],
    .input-container select,
        input[type=email],
        input[type=file],
        input[type=password] {
        width: 260px;
        height: 50px;
        margin-left: 20px;
        margin-bottom: 20px;
        padding-left: 45px;
        background: #50597b;
        color: #fff;
        border: solid 1px #1f253d;
        border-radius: 5px;
    }



    input[type=text]::-webkit-input-placeholder {
        /* WebKit browsers */
        color: #fff;
    }

    input[type=text]:-moz-input-placeholder {
        /* Mozilla Firefox 4 to 18 */
        color: #fff;
    }

    input[type=text]::-moz-input-placeholder {
        /* Mozilla Firefox 19+ */
        color: #fff;
    }

    input[type=text]:-ms-input-placeholder {
        /* Internet Explorer 10+ */
        color: #fff;
    }

    input[type=text]:focus {
        outline: none;
        /* removes the default orange border when focus */
        border: 1px solid #11a8ab;
    }

    .form-left {
        width: 50%;
        float: left;
    }

    .form-right {
        width: 50%;
        float: right;
    }

    .form-flex {
        display: flex;
        flex-wrap: wrap;
        width: 100%;
    }

    .float-left {
        width: 40%;
        float: left;
    }

    .float-right {
        width: 55%;
        float: right;
    }

    @media screen and (max-width:769px) {
        .profile-middle {
            display: flex;
            flex-wrap: wrap;
        }

        .team-items {
            height: 200px;
            overflow: auto;
        }

        .float-left,
        .float-right {
            width: 100%;
        }

        .form-right {
            width: 100%;
            float: unset;
            text-align: center;
        }

        .form-left {
            width: 100%;
            float: unset;
            text-align: center;
        }

        .input-icon {
            left: 120px
        }

        .horizontal-list li {
            float: unset;
        }

        .block {
            height: unset;
        }

        #hori-list {
            display: none;
        }

        #bars-block {
            display: block !important;
        }
    }


    @media screen and (max-width:570px) {
        .input-icon {
            left: 80px;
        }
    }

    @media screen and (max-width:481px) {
        .input-icon {
            left: 10px;
        }
    }

    @media screen and (max-width:365px) {

        input[type=text],
        .input-container select {
            width: 170px;
        }
    }

    #bars-block {
        display: none;
        cursor: pointer;
    }

    .active-block {
        display: block !important;
    }


    .team-items .titular {
        background: #cc324b;
    }

    .team-items .titular .icon {
        padding-right: 15px;
        font-size: 26px;
    }

    .team-items .current-day {
        height: 135px;
        background: #e64c65;
    }

    .team-items .current-day p {
        margin: 0;
        padding-left: 50px;
    }

    .current-day-date {
        font-size: 16px;
        padding-top: 16px;
    }

    .current-day-temperature {
        font-size: 70px;
    }

    .current-day-temperature .icon-cloudy {
        padding-left: 20px;
    }

    .team-items .next-days {}

    .team-items .next-days p {
        margin: 0;
        display: inline-block;
        font-size: 16px;
    }

    .team-items .next-days a {
        line-height: 58px;
        border-bottom: 1px solid #1f253d;
        -webkit-transition: background .3s;
        transition: background .3s;
    }

    .team-items .next-days a:hover {
        background: #50597b;
    }

    .team-items .next-days a:hover .day {
        color: #e64c65;
    }

    .team-items .team-name-block {
        padding-left: 20px;
    }

    .team-items .team-llink-block {
        float: right;
        padding-right: 20px;
    }

    .team-items .team-llink-block .icon {
        padding-left: 10px;
    }



    .trophy-cabinet {
        margin: 15px 0;
        display: flex;
        justify-content: space-around;
    }

    .achievement-heading h2 {
        background: #cc324b;
    }
</style>


<div class="inner-page-banner">
    <img src="{% static 'images/img-05'%}" alt="">
    <div class="container">
    </div>
</div>
<div class="inner-information-text">
    <div class="container">

        <ul class="breadcrumb">
            <li><a href="/">Home</a></li>
            <li><a href="#">Profile</a></li>
            <li class="active">{{user.first_name}} {{user.last_name}}</li>
        </ul>
    </div>
</div>
</section>

<div style="padding: 1rem 2rem 2rem;" class="cntnr">
    <div class="main-container">
        <!-- HEADER -->
        <div class="block">
            <i style="padding: 7px;
        font-size: 25px;
        " id="bars-block" class="fa fa-bars"></i>
           
            <ul id="hori-list" class="header-menu horizontal-list">

                <li>
                    <a onclick="openTab(event, 'profileDetail')" id="defaultOpen" class="header-menu-tab tablinks"><span
                            class="fas fa-user scnd-font-color"></span>    Account</a>
                </li>
                {% if request.user == user %}
                <li>
                    <a onclick="openTab(event, 'notificationTab')" class="header-menu-tab tablinks"><span
                            class="fas fa-bell scnd-font-color"></span>    Notifications</a>
                    <a class="header-menu-number tablinks">{{ user.userdtl.invitation.count }}</a>
                </li>
                <li>
                    <a onclick="openTab(event, 'settingTab')" class="header-menu-tab tablinks"><span
                            class="fas fa-cog scnd-font-color"></span>    Settings</a>
                </li>

                {% endif %}
            </ul>
        </div>
        <div class="left-container">

            <div style="height: 1100px;" id="profileDetail" class="profile block tabcontent">
                <!-- PROFILE (MIDDLE-CONTAINER) -->
                <!-- <a class="add-button" href="#28"><span class="icon entypo-plus scnd-font-color"></span></a> -->
                <div style="border-radius: unset; text-align:center;" class="profile-picture big-profile-picture clear">
                    
                    {% if user.userdtl.img_user != "" %}
                    <img width="150px; " alt="{{ user.username }} picture"
                        src="{{ user.userdtl.img_user.url }}">
                    {% else %}
                        <img width="150px; " alt="{{ user.username }} picture"
                        src="{% static 'images/user.jpg' %}">
                    {% endif %}
                </div>
                

                <h1 class="user-name">{{ user.username }}</h1>
                <div class="profile-description">
                    <p class="scnd-font-color">Joined At : {{ user.date_joined | date:"F, d, Y"}}</p>
                </div>

                <div class="profile-middle">
                    <div class="float-left">
                        <div class="team-items block clear">
                            <!-- team-items (MIDDLE-CONTAINER) -->
                            <h2 class="titular"><span class="icon entypo-location"></span><strong>Teams</strong></h2>

                            <ul class="next-days">
                                {% for member in teams %}
                                <li>
                                    <a>
                                        <p class="team-name-block"><span class="day">{{ member.team }}</span> <span
                                                class="scnd-font-color">({{ member.rank }})</span></p>
                                        <p class="team-llink-block"><a style="display: unset;"
                                                href="{% url 'team' member.team.id %}"><span
                                                    class="fa fa-eye scnd-font-color"></span></a></p>
                                    </a>
                                </li>
                                <hr style="margin-top: 0;">
                                {% endfor %}

                            </ul>
                        </div>
                    </div>

                    <div class="float-right">
                        <div class="block">
                            <div class="achievements-item">
                                <div class="achievement-heading">
                                    <h2 class="titular">Trophies</h2>
                                </div>
                                <div class="trophy-cabinet">
                                    <div class="gold-trophy">
                                        <i style="color: gold;" class="fa fa-trophy fa-5x"></i>
                                        <div style="text-align: center;">
                                            {{ user.userdtl.gold_trophy }}
                                        </div>
                                    </div>
                                    <div class="silver-trophy">
                                        <i style="color: silver;" class="fa fa-trophy fa-5x"></i>
                                        <div style="text-align: center;">
                                            {{ user.userdtl.silver_trophy }}
                                        </div>

                                    </div>
                                    <div class="gold-trophy">
                                        <i style="color: firebrick;" class="fa fa-trophy fa-5x"></i>
                                        <div style="text-align: center;">
                                            {{ user.userdtl.bronze_trophy }}
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div style="margin-top: 200px;" class="statastic">

                    <h2 style="background: #cc324b;" class="titular">Stats</h2>

                    <div class="profile-details">
                        <div class="team-info">
                            <div class="name">
                                Total Matches
                            </div>
                            <div class="stats">
                                {{ user.userdtl.total_matches }}
                            </div>
                        </div>
                        <div class="team-info">
                            <div class="name">
                                Win
                            </div>
                            <div class="stats">
                                {{ user.userdtl.user_win }}
                            </div>
                        </div>
                        <div class="team-info">
                            <div class="name">
                                Lose
                            </div>
                            <div class="stats">
                                {{ user.userdtl.user_lose }}
                            </div>
                        </div>
                        <div class="team-info">
                            <div class="name">
                                Win Ratio
                            </div>
                            <div class="stats">
                                {{ user.userdtl.win_ratio }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% if request.user == user %}
            <div id="settingTab" class="profile block tabcontent">
                <div class="account block">
                    <!-- ACCOUNT (RIGHT-CONTAINER) -->
                    <h2 class="titular">Edit Account</h2>
                    <form action="{% url 'update' %}"  enctype="multipart/form-data" method="POST">
                        <div class="form-flex">
                            {% csrf_token %}
                            <div class="form-left">
                                <div class="input-container">

                                    <input name="fname" type="text" value="{{ user.first_name }}" placeholder="First Name" class="email text-input">
                                    <div class="input-icon password-icon"><span title="First Name"
                                            class="fas fa-dice-d6 scnd-font-color"></span></div>
                                </div>
                                <div class="input-container">
                                    <input type="text" name="lname" value="{{ user.last_name }}" placeholder="Last Name" class="password text-input">
                                    <div class="input-icon password-icon"><span title="Last Name"
                                            class="fas fa-dice-d6 scnd-font-color"></span></div>
                                </div>
                                <div class="input-container">
                                    <input type="email" name="email" placeholder="{{ user.email }}" value="{{ user.email }}" class="password text-input">
                                    <div class="input-icon password-icon"><span title="Last Name"
                                            class="far fa-envelope scnd-font-color"></span></div>
                                </div>
                                
                                

                                <div class="input-container">
                                    <input type="text" name="twitch" value="{{ user.userdtl.twitch }}"
                                        placeholder="{{ user.userdtl.twitch }}" class="password text-input">
                                    <div class="input-icon password-icon"><span title="Twitch Link"
                                            class="fab fa-twitch scnd-font-color"></span></div>
                                </div>


                                <div class="input-container">

                                    <input type="text" name="psn" placeholder="{{ user.userdtl.psn }}"
                                        class="password text-input">
                                    <div class="input-icon password-icon"><span title="PlayStation / PSN"
                                            class="fab fa-playstation scnd-font-color"></span></div>
                                </div>

                            </div>
                            <div class="form-right">
                                <div class="input-container">

                                    <select name="timezone" aria-placeholder="{{ user.userdtl.country }}">
                                        <option selected>{{ user.userdtl.timezone_user }}</option>
                                        {% for timezone in timezone %}

                                        <option value="{{ timezone }}">{{ timezone }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="input-icon password-icon"><span title="Timezones"
                                            class="fas fa-clock scnd-font-color"></span></div>
                                </div>
                                <div class="input-container">
                                    <select name="country" aria-placeholder="{{ user.userdtl.country }}">
                                        <option selected>{{ user.userdtl.country }}</option>
                                        {% for country in countries %}

                                        <option value="{{ country }}">{{ country }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="input-icon password-icon"><span title="Country"
                                            class="fas fa-globe scnd-font-color"></span></div>
                                </div>
                                <div class="input-container">
                                    <input type="text" value="{{ user.userdtl.youtube }}" name="youtube"
                                        placeholder="{{ user.userdtl.youtube }}" class="password text-input">
                                    <div class="input-icon password-icon"><span title="Youtube Link"
                                            class="fab fa-youtube scnd-font-color"></span></div>
                                </div>
                                <div class="input-container">

                                    <input type="text" value="{{ user.userdtl.twitter }}" name="twitter"
                                        placeholder="{{ user.userdtl.twitter }}" class="password text-input">
                                    <div class="input-icon password-icon"><span title="Twitter Link"
                                            class="fab fa-twitter scnd-font-color"></span></div>
                                </div>
                               
                                <div class="input-container">
                                    {% if user.userdtl.img_user != "" %}
                                    <input style="display: unset; padding : 10px 2px;" type="file" value="{{ user.userdtl.img_user.url }}" name="image_change"
                                        placeholder="{{ user.userdtl.twitter }}" class="password text-input">
                                        {% else %}
                                        <input style="display: unset; padding : 10px 2px;" type="file" name="image_change"
                                            placeholder="{{ user.userdtl.twitter }}" class="password text-input">
                                    {% endif %}
                                        <div class="input-icon password-icon"><span title="Image"
                                            class="fa fa-picture-o scnd-font-color"></span></div>
                                </div>

                            </div>
                        </div>


                        
                      
                        
                        

                              

                        <div class="button-container" style="text-align: center;">
                            <button class="button-update" type="submit">Update</button>
                        </div>
                    </form>

                    <div style="text-align: center; padding: 15px 0;" class="pt-4">
                        <form method="POST" action="{% url 'changepassword' %}">
                        {% csrf_token %}
                            <a  class="dark-grey-text d-flex justify-content-between" data-toggle="collapse"
                          href="#collapseExample" style="color: #fff;" aria-expanded="false" aria-controls="collapseExample">
                          Change Password
                          <span><i style="color: #fff;" class="fas fa-key pt-1"></i></span>
                        </a>
                        <div style="text-align: -webkit-center;" class="collapse" id="collapseExample">
                          <div class="mt-3">
                            <div class="md-form md-outline mb-0">
                              <input type="password" id="oldPassword" name="old_password" class="form-control font-weight-light"
                                placeholder="Enter Old Password">
                            </div>
                          </div>
                          <div class="mt-3">
                            <div class="md-form md-outline mb-0">
                              <input type="password" id="password" name="new_password1"  class="form-control font-weight-light"
                                placeholder="Enter New password">
                            </div>
                          </div>
                          <div class="mt-3">
                            <div class="md-form md-outline mb-0">
                              <input type="password" id="password1" name="new_password2" class="form-control font-weight-light"
                                placeholder="Enter New Password">
                            </div>
                          </div><hr>
                          <div class="mt-3">
                          <button style="float: unset;" class="btn submit_btn" onclick="ChangePassword()" style="margin: 15px; margin-top: 0px; cursor: pointer;">Update My
                            Password </button>
                        </div>
                        </div>
                    </form>
                      </div>


                </div>
            </div>
            <div style="overflow: auto;" id="notificationTab" class="profile block tabcontent">
                {% for invite in user.userdtl.invitation.all %}

                <div class="notice success">
                    <p style="float: unset; color: teal;"> You have been Invited to {{ invite.name }}, for
                        {{ invite.ladder }}
                        <a href="{% url 'accept' invite.name %}"><button style="border: none;
                              width: 25px;
                              border-radius: 5px;
          " type="button" class="btn-labeled btn-success">
                                <span class="btn-label"><i class="glyphicon glyphicon-ok"></i></span></button> </a>
                        <a href="{% url 'deny' invite.id %}"><button style="border: none;
                              width: 25px;
                              border-radius: 5px;
          " type="button" class="btn-labeled btn-danger">
                                <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span></button> </a>
                    </p>
                </div>
                {% empty %}
                No Notifications
                {% endfor%}
                
            </div>
            {% endif %}
            
        </div>
    </div>
</div>
<script>
    bar = document.querySelector('#bars-block')
    hori = document.querySelector('#hori-list')
    bar.addEventListener('click', () => {
        hori.classList.toggle('active-block')
    })
</script>

{% endblock %}